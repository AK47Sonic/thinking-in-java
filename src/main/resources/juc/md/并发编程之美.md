## 并发编程之美

### 线程和进程
进程是系统进行资源分配和调度的基本单位， 线程则是进程的一个执行路径， 一个进程中至少有一个线程，进程中的多个线程共享进程的资源。操作系统在分配资源时是把资源分配给进程的， 但是CPU 资源比较特殊， 它是被分配到线程的， 因为真正要占用CPU 运行的是线程， 所以也说线程是CPU 分配的基本单位。在Java 中，当我们启动main 函数时其实就启动了一个JVM的进程， 而main 函数所在的线程就是这个进程中的一个线程，也称主线程。

### 程序计数器
程序计数器是一块内存区域，用来记录线程当前要执行的指令地址。程序计数器就是为了记录该线程让出CPU 时的执行地址的，待再次分配到时间片时线程就可以从自己私有的计数器指定地址继续执行。另外需要注意的是，如果执行的是native 方法，那么pc 计数器记录的是undefined 地址，只有执行的是Java 代码时pc 计数器记录的才是下一条指令的地址。

### 栈
每个线程都有自己的占资源，用于存储该线程的局部变量，这些局部变量是该线程私有的，其他线程是访问不了的，除此之外枝还用来存放线程的调用技帧。

### 堆
堆是一个进程中最大的一块内存，堆是被进程中的所有线程共享的，是进程创建时分配的，堆里面主要存放使用new 操作创建的对象实例。

### 方法区
方法区则用来存放NM 加载的类、常量及静态变量等信息，也是线程共享的。

### 创建线程的3种方式
- Thread
- Runnable
- FutureTask implements RunnableFuture, 通过get方法可以拿到返回值
    - FutureTask(Callable<V> callable) 
    - FutureTask(Runnable runnable, V result)


### Callable VS Runnable
- Runnable中run没有返回值，不能抛异常
- Callable中call有返回值，能抛异常


